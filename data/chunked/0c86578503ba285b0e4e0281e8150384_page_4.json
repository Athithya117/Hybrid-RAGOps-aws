{
  "document_id": "0c86578503ba285b0e4e0281e8150384",
  "chunk_id": "0c86578503ba285b0e4e0281e8150384_page_4",
  "chunk_type": "page",
  "text": "(1) Text Retrieval Module Semantic Matching Stage:\n\nFor a user-provided title and 2. For entities that fail ex-\n\ntext snippet, HyFedRAG’s text retrieval module first con- act matching, form query pairs with all candidate\n\ncatenates them into a single query string and concurrently and invoke the locally de-\n\ninvokesbothsparseanddenseretrievalpipelines.Sparsere- ployedFlagRerankermodeltocomputenormalizedsim-\n\nilarityscoress (e,c).Retainonlythosepairssatis-\n\ntrievalemploysTF–IDFvectorizationandcosinesimilarity\n\nrerank\n\nagainst a precomputed document–UID mapping matrix to fying:\n\ncapture keyword-level matches. Specifically, during initial-\n\nization, the system generates a sparse feature matrix over\n\nall patient records and builds a mapping from each UID to\n\nwhereτ isapresetthreshold(e.g.,0.9).\n\nitsrowindexinthematrix.Atretrievaltime,thequerytext\n\nThecombinedentitysimilarityscoreisdefinedas:\n\nisconvertedintoaTF–IDFvectorandcomparedviacosine\n\nsimilarity to candidate documents’ sparse vectors, yielding\n\nifexactmatchsucceeds;\n\naninitialTop-KlistofcandidateUIDs.\n\nifsemanticmatchand\n\nSimultaneously, dense retrieval loads a locally de-\n\nentity\n\nployed BGE embedding model to project the query into a\n\notherwise.\n\nhigh-dimensionalsemanticspaceandleveragesaFAISSin-\n\ndex for nearest-neighbor search, retrieving the Top-K con-\n\nPatient Relation Path Retrieval: For each entity–node\n\ntent blocks that are semantically closest to the query. This\n\npair with the module executes a\n\napproach captures deeper semantic associations and syn-\n\nCypherqueryinNeo4jtotraverseallrelationsdirectlycon-\n\nonymic relationships, compensating for sparse retrieval’s\n\nnectedtopatientnodes(labelPatient),extractingrelation\n\nkeywordlimitations.\n\ntypesrandpatientidentifiersp.Eachrelationpathisencap-\n\nTobalanceexactkeywordmatchingwithsemanticrecall,\n\nsulatedasastatement\n\nHyFedRAG\n\nmerges candidate pools retrieved from sparse\n\n(TF–IDF)anddense(RerankModel)pipelines,andthenap-\n\nplies a hybrid reranking strategy. The final relevance score\n\nand carries the previously computed entity similarity score\n\nforacandidatedocumentdiscomputedas:\n\ns (e,c)asitsinitialscore.\n\nSemantic Reranking and Summary Selection:\n\nGiven\n\ntfidf reranker\n\nthe set of candidate the\n\n(query,m)\n\nmodule applies reranker model to each pair to\n\nwhere is the query, denotes the cosine\n\ntfidf\n\ncompute a normalized statement score It then\n\nsimilarity between and under TF–IDF representations,\n\ncomputesthefinalscoreviaaweightedfusion:\n\nand represents the normalized semantic rel-\n\nreranker\n\nevance score produced by a locally deployed FlagReranker\n\nfinal entity stmt\n\nmodel.Thehyperparameterα∈[0,1]controlsthetrade-off\n\nwhere balances entity matching against seman-\n\nbetween sparse retrieval precision and deep semantic rele-\n\ntic reranking. The system ranks candidates by in de-\n\nvance.\n\nfinal\n\nscendingorder,deduplicatesbypatientp(retainingonlythe\n\nScore(q,d)\n\nAfter computing for all candidates, docu-\n\nhighest-scoringpathperpatient),andselectsthetopK\n\nmentsarerankedindescendingorderoftheirscores.Finally,\n\ntientstoformthestructuredrelation-pathsummary.\n\ntop-k\n\nthe text segments are selected as input to the down-\n\nstreamsummarizationmodule.\n\n(3) SQL Retrieval Module This module performs re-\n\nThishybridscoringformulationallowsHyFedRAGtody-\n\ntrievaloverstructuredpatientrecordsstoredinaclient-side\n\nnamically adjust its retrieval emphasis—from strict lexical\n\nrelationaldatabase,andconsistsofthreemainsteps:\n\noverlap to deep semantic relevance—by tuning thereby\n\nFortheinputqueryq,applyalocally\n\nEntityExtraction:\n\nachieving a more robust retrieval pipeline across diverse\n\ndeployed NER model to extract the set of medical entities:\n\nquerytypes.\n\n1 2 m\n\n(2)KGRetrievalModule\n\nNext,wewillintroducetheen-\n\nUsingtheextractedentitysetE(q) =\n\nHybridRetrieval:\n\ntitymatching,thepatientretrievalandsummaryselection.\n\nthe system performs a retrieval process for\n\neach entity via MySQL full-text search. Specif-\n\nEntity Similarity Matching:\n\nFor each input query, the\n\nically, it uses both Boolean mode and Natural Language\n\nmodule first applies a locally deployed NER model to ex-\n\nmodetocomputetwosparsescores:\n\ntractthesetofassociatedmedicalentitiesE ={e ,...,e }\n\nfromthequerytext.Then,itperformsatwo-stagematching\n\nBoolean Score\n\n1. Full-text relevance com-\n\nprocessforeachentitye∈E:\n\nputedusingMySQL’sBooleanmode.\n\nNaturalLanguageScore(S (e,d)):Semantic-likeness\n\nExact Matching Stage:\n\n1. Execute an exact lookup in the\n\nscorecomputedviaNaturalLanguagemode.\n\nNeo4jgraphdatabaseusingtheentityidentifier.Ifanode\n\nis found and its label is not in the exclusion set , For each result the system then applies application-level\n\nassignasimilarityscore:s (e,c)=1.0.\n\nheuristicstocompute:",
  "token_count": 1124,
  "embedding": null,
  "file_type": "application/pdf",
  "source_url": "s3://e2e-rag-system-42/data/raw/pdfs/graph_rag_sep_2025.pdf",
  "page_number": 4,
  "slide_range": null,
  "row_range": null,
  "token_range": [
    0,
    1123
  ],
  "audio_range": null,
  "timestamp": "2025-09-17T12:52:30.826196Z",
  "parser_version": null,
  "tags": null,
  "layout_tags": [
    "page"
  ],
  "used_ocr": false,
  "parse_chunk_duration_ms": 505,
  "heading_path": [],
  "headings": [],
  "line_range": null,
  "chunk_duration_ms": null
}